@inject OrderManagementDashBoard.Services.OrderService orderService
@using OrderManagementDashBoard.Models
@rendermode InteractiveServer
<h3>Add New Order</h3>
<form @onsubmit="CreateOrder" @onsubmit:preventDefault>
    <div class="mb-2">
        <label>CustomerName</label>
        <input class="form-control" @bind="CustomerName" />
    </div>
    <button class="btn btn-primary btn-sm">
        Add Order
    </button>
</form>

@code {
    [Parameter] public List<Order> orders { get; set; } = new List<Order>();
    [Parameter] public EventCallback<Order> OnOrderAdded{ get; set; }
    string CustomerName = string.Empty;
    void CreateOrder()
    {
        var newOrder = new Order()
        {
            Id=GenerateOrderId(),
            CustomerName=CustomerName,
            Status="Pending"
        };
        orderService.AddOrder(orders, newOrder);
       // CustomerName = string.Empty;
        OnOrderAdded.InvokeAsync(newOrder);
       
    }
    int GenerateOrderId()
    {
        return orders.Any() ? orders.Max(o => o.Id) + 1 : 1001;
    }
}
